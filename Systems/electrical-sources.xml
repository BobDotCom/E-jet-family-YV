<PropertyList>
    <!-- ************************ AC ************************ -->

    <!-- GPU -->
    <filter>
        <name>GPU auto-off on disconnect</name>
        <type>gain</type>
        <gain>1</gain>
        <enable>
            <condition>
                <not>
                    <property>/controls/electric/external-power-connected</property>
                </not>
            </condition>
        </enable>
        <input>
            <value>0</value>
        </input>
        <output>/controls/electric/external-power</output>
    </filter>
    <filter>
        <name>GPU watts</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <and>
                    <property>/controls/electric/external-power-connected</property>
                    <property>/controls/electric/external-power</property>
                </and>
            </condition>
            <value>60000</value>
        </input>
        <output>/systems/electrical/sources/ac-gpu/watts</output>
    </filter>
    <filter>
        <name>GPU voltage</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <less-than>
                    <property>/systems/electrical/sources/ac-gpu/watts</property>
                    <value>10</value>
                </less-than>
            </condition>
            <value>0</value>
        </input>
        <input>
            <expression>
                <product>
                    <value>115</value>
                    <div>
                        <property>/systems/electrical/sources/ac-gpu/watts</property>
                        <max>
                            <value>60000</value>
                            <property>/systems/electrical/sources/ac-gpu/load</property>
                        </max>
                    </div>
                </product>
            </expression>
        </input>
        <output>/systems/electrical/sources/ac-gpu/volts</output>
    </filter>
    <filter>
        <name>GPU A/C status</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <not>
                    <property>/controls/electric/external-power</property>
                </not>
            </condition>
            <value>0</value>
        </input>
        <input>
            <condition>
                <greater-than>
                    <property>/systems/electrical/sources/ac-gpu/volts</property>
                    <value>110</value>
                </greater-than>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>/systems/electrical/sources/ac-gpu/status</output>
    </filter>

    <!-- APU -->
    <filter>
        <name>APU visible</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <or>
                    <!-- APU is visible whenever it is running or demanded -->
                    <property>/controls/electric/apu-generator</property>
                    <property>/engines/apu/running</property>
                </or>
            </condition>
            <value>1</value>
        </input>
        <output>/systems/electrical/sources/generator[0]/visible</output>
    </filter>
    <filter>
        <name>APU GEN watts</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <and>
                    <property>/controls/electric/apu-generator</property>
                    <greater-than>
                        <property>/engines/apu/rpm</property>
                        <value>99</value>
                    </greater-than>
                </and>
            </condition>
            <value>40000</value>
        </input>
        <output>/systems/electrical/sources/generator[0]/watts</output>
    </filter>
    <filter>
        <name>APU GEN voltage</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <less-than>
                    <property>/systems/electrical/sources/generator[0]/watts</property>
                    <value>10</value>
                </less-than>
            </condition>
            <value>0</value>
        </input>
        <input>
            <expression>
                <product>
                    <value>115</value>
                    <div>
                        <property>/systems/electrical/sources/generator[0]/watts</property>
                        <max>
                            <value>40000</value>
                            <property>/systems/electrical/sources/generator[0]/load</property>
                        </max>
                    </div>
                </product>
            </expression>
        </input>
        <output>/systems/electrical/sources/generator[0]/volts</output>
    </filter>
    <filter>
        <name>APU GEN status</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <not>
                    <property>/controls/electric/apu-generator</property>
                </not>
            </condition>
            <value>0</value>
        </input>
        <input>
            <condition>
                <greater-than>
                    <property>/systems/electrical/sources/generator[0]/volts</property>
                    <value>110</value>
                </greater-than>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>/systems/electrical/sources/generator[0]/status</output>
    </filter>

    <!-- IDG 1 -->
    <filter>
        <name>IDG 1 GEN amps</name>
        <type>gain</type>
        <gain>40000</gain>
        <input>
            <condition>
                <and>
                    <property>/controls/electric/engine[0]/generator</property>
                    <greater-than>
                        <property>/engines/engine[0]/n2</property>
                        <value>50</value>
                    </greater-than>
                </and>
            </condition>
            <value>1</value>
        </input>
        <output>/systems/electrical/sources/generator[1]/watts</output>
    </filter>
    <filter>
        <name>IDG 1 GEN voltage</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <less-than>
                    <property>/systems/electrical/sources/generator[1]/watts</property>
                    <value>10</value>
                </less-than>
            </condition>
            <value>0</value>
        </input>
        <input>
            <expression>
                <product>
                    <value>115</value>
                    <div>
                        <property>/systems/electrical/sources/generator[1]/watts</property>
                        <max>
                            <value>40000</value>
                            <property>/systems/electrical/sources/generator[1]/load</property>
                        </max>
                    </div>
                </product>
            </expression>
        </input>
        <output>/systems/electrical/sources/generator[1]/volts</output>
    </filter>
    <filter>
        <name>IDG 1 status</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <not>
                    <property>/controls/electric/engine[0]/generator</property>
                </not>
            </condition>
            <value>0</value>
        </input>
        <input>
            <condition>
                <greater-than>
                    <property>/systems/electrical/sources/generator[1]/volts</property>
                    <value>110</value>
                </greater-than>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>/systems/electrical/sources/generator[1]/status</output>
    </filter>

    <!-- IDG 2 -->
    <filter>
        <name>IDG 2 GEN amps</name>
        <type>gain</type>
        <gain>40000</gain>
        <input>
            <condition>
                <and>
                    <property>/controls/electric/engine[1]/generator</property>
                    <greater-than>
                        <property>/engines/engine[1]/n2</property>
                        <value>50</value>
                    </greater-than>
                </and>
            </condition>
            <value>1</value>
        </input>
        <output>/systems/electrical/sources/generator[2]/watts</output>
    </filter>
    <filter>
        <name>IDG 2 GEN voltage</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <less-than>
                    <property>/systems/electrical/sources/generator[2]/watts</property>
                    <value>10</value>
                </less-than>
            </condition>
            <value>0</value>
        </input>
        <input>
            <expression>
                <product>
                    <value>115</value>
                    <div>
                        <property>/systems/electrical/sources/generator[2]/watts</property>
                        <max>
                            <value>40000</value>
                            <property>/systems/electrical/sources/generator[2]/load</property>
                        </max>
                    </div>
                </product>
            </expression>
        </input>
        <output>/systems/electrical/sources/generator[2]/volts</output>
    </filter>
    <filter>
        <name>IDG 2 status</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <not>
                    <property>/controls/electric/engine[1]/generator</property>
                </not>
            </condition>
            <value>0</value>
        </input>
        <input>
            <condition>
                <greater-than>
                    <property>/systems/electrical/sources/generator[2]/volts</property>
                    <value>110</value>
                </greater-than>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>/systems/electrical/sources/generator[2]/status</output>
    </filter>

    <!-- Inverter -->
    <filter>
        <name>INVERTER watts</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <greater-than>
                    <property>/systems/electrical/buses/dc[3]/volts</property>
                    <value>18</value>
                </greater-than>
            </condition>
            <value>250</value>
        </input>
        <output>/systems/electrical/sources/inverter/watts</output>
    </filter>
    <filter>
        <name>INVERTER voltage</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <less-than>
                    <property>/systems/electrical/sources/inverter/watts</property>
                    <value>10</value>
                </less-than>
            </condition>
            <value>0</value>
        </input>
        <input>
            <expression>
                <product>
                    <value>115</value>
                    <div>
                        <property>/systems/electrical/sources/inverter/watts</property>
                        <max>
                            <value>250</value>
                            <property>/systems/electrical/sources/inverter/load</property>
                        </max>
                    </div>
                </product>
            </expression>
        </input>
        <output>/systems/electrical/sources/inverter/volts</output>
    </filter>
    <filter>
        <name>INVERTER A/C status</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <greater-than>
                    <property>/systems/electrical/sources/inverter/volts</property>
                    <value>110</value>
                </greater-than>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>/systems/electrical/sources/inverter/status</output>
    </filter>


    <!-- ************************ DC ************************ -->

    <!-- GPU -->
    <filter>
        <name>GPU DC</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <property>/controls/electric/external-power-connected</property>
            </condition>
            <value>28</value>
        </input>
        <output>/systems/electrical/sources/dc-gpu/volts</output>
    </filter>

    <!-- Battery 1 -->
    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <expression>
                <table>
                    <property>/systems/electrical/sources/battery[0]/charge</property>
                    <entry>
                        <ind>0</ind><dep>0</dep>
                    </entry>
                    <entry>
                        <ind>0.1</ind><dep>18.0</dep>
                    </entry>
                    <entry>
                        <ind>1</ind><dep>22.8</dep>
                    </entry>
                </table>
            </expression>
        </input>
        <output>/systems/electrical/sources/battery[0]/volts-avail</output>
    </filter>
    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <property>/controls/electric/battery-switch[0]</property>
            </condition>
            <property>/systems/electrical/sources/battery[0]/volts-avail</property>
        </input>
        <output>/systems/electrical/sources/battery[0]/volts</output>
    </filter>
    <filter>
        <name>Battery 1 status</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <not>
                    <property>/controls/electric/battery-switch[0]</property>
                </not>
            </condition>
            <value>0</value>
        </input>
        <input>
            <condition>
                <greater-than>
                    <property>/systems/electrical/sources/battery[0]/volts</property>
                    <value>18</value>
                </greater-than>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>/systems/electrical/sources/battery[0]/status</output>
    </filter>
    <!-- Battery 2 -->
    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <expression>
                <table>
                    <property>/systems/electrical/sources/battery[1]/charge</property>
                    <entry>
                        <ind>0</ind><dep>0</dep>
                    </entry>
                    <entry>
                        <ind>0.1</ind><dep>18.0</dep>
                    </entry>
                    <entry>
                        <ind>1</ind><dep>22.8</dep>
                    </entry>
                </table>
            </expression>
        </input>
        <output>/systems/electrical/sources/battery[1]/volts-avail</output>
    </filter>
    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <property>/controls/electric/battery-switch[1]</property>
            </condition>
            <property>/systems/electrical/sources/battery[1]/volts-avail</property>
        </input>
        <output>/systems/electrical/sources/battery[1]/volts</output>
    </filter>
    <filter>
        <name>Battery 2 status</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <not>
                    <property>/controls/electric/battery-switch[1]</property>
                </not>
            </condition>
            <value>0</value>
        </input>
        <input>
            <condition>
                <greater-than>
                    <property>/systems/electrical/sources/battery[1]/volts</property>
                    <value>18</value>
                </greater-than>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>/systems/electrical/sources/battery[1]/status</output>
    </filter>

    <!-- TRU ESS -->
    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <property>/controls/electric/tru-switch[0]</property>
            </condition>
            <expression>
                <product>
                    <div>
                        <property>/systems/electrical/buses/ac[3]/volts</property>
                        <value>115</value>
                    </div>
                    <value>28</value>
                </product>
            </expression>
        </input>
        <input>
            <value>0</value>
        </input>
        <output>/systems/electrical/sources/tru[0]/volts</output>
    </filter>
    <filter>
        <name>TRU ESS status</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <not>
                    <property>/controls/electric/tru-switch[0]</property>
                </not>
            </condition>
            <value>0</value>
        </input>
        <input>
            <condition>
                <greater-than>
                    <property>/systems/electrical/sources/tru[0]/volts</property>
                    <value>18</value>
                </greater-than>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>/systems/electrical/sources/tru[0]/status</output>
    </filter>
    <!-- TRU left -->
    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <property>/controls/electric/tru-switch[1]</property>
            </condition>
            <expression>
                <product>
                    <div>
                        <property>/systems/electrical/buses/ac[1]/volts</property>
                        <value>115</value>
                    </div>
                    <value>28</value>
                </product>
            </expression>
        </input>
        <input>
            <value>0</value>
        </input>
        <output>/systems/electrical/sources/tru[1]/volts</output>
    </filter>
    <filter>
        <name>TRU 1 status</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <not>
                    <property>/controls/electric/tru-switch[1]</property>
                </not>
            </condition>
            <value>0</value>
        </input>
        <input>
            <condition>
                <greater-than>
                    <property>/systems/electrical/sources/tru[1]/volts</property>
                    <value>18</value>
                </greater-than>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>/systems/electrical/sources/tru[1]/status</output>
    </filter>
    <!-- TRU right -->
    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <property>/controls/electric/tru-switch[2]</property>
            </condition>
            <expression>
                <product>
                    <div>
                        <property>/systems/electrical/buses/ac[2]/volts</property>
                        <value>115</value>
                    </div>
                    <value>28</value>
                </product>
            </expression>
        </input>
        <input>
            <value>0</value>
        </input>
        <output>/systems/electrical/sources/tru[2]/volts</output>
    </filter>
    <filter>
        <name>TRU 2 status</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <not>
                    <property>/controls/electric/tru-switch[2]</property>
                </not>
            </condition>
            <value>0</value>
        </input>
        <input>
            <condition>
                <greater-than>
                    <property>/systems/electrical/sources/tru[2]/volts</property>
                    <value>18</value>
                </greater-than>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>/systems/electrical/sources/tru[2]/status</output>
    </filter>

    <!-- RAT -->
    <!--
    <filter>
        <name>RAT amps</name>
        <type>gain</type>
        <gain>15000</gain>
        <input>
            <condition>
                <and>
                    <property>/controls/electric/ram-air-turbine</property>
                    <greater-than>
                        <property>/velocities/airspeed-kt</property>
                        <value>130</value>
                    </greater-than>
                </and>
            </condition>
            <value>1</value>
        </input>
        <output>/systems/electrical/sources/generator[3]/watts</output>
    </filter>
    -->
    <filter>
        <name>RAT voltage</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <less-than>
                    <property>/systems/electrical/sources/generator[3]/watts</property>
                    <value>10</value>
                </less-than>
            </condition>
            <value>0</value>
        </input>
        <input>
            <expression>
                <product>
                    <value>115</value>
                    <div>
                        <property>/systems/electrical/sources/generator[3]/watts</property>
                        <max>
                            <value>15000</value>
                            <property>/systems/electrical/sources/generator[3]/load</property>
                        </max>
                    </div>
                </product>
            </expression>
        </input>
        <output>/systems/electrical/sources/generator[3]/volts</output>
    </filter>
    <filter>
        <name>RAT status</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <not>
                    <property>/controls/electric/ram-air-turbine</property>
                </not>
            </condition>
            <value>0</value>
        </input>
        <input>
            <condition>
                <greater-than>
                    <property>/systems/electrical/sources/generator[3]/volts</property>
                    <value>110</value>
                </greater-than>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>/systems/electrical/sources/generator[3]/status</output>
    </filter>


</PropertyList>
