<PropertyList>
    <!-- LEFT ENGINE -->
    <filter>
        <name>Starter Left</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <equals>
                    <property>fadec/engine-switch[0]</property>
                    <value>2</value>
                </equals>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>0</value>
        </input>
        <output>controls/engines/engine[0]/starter-switch</output>
    </filter>

    <filter>
        <name>Spring-load engine switch Left</name>
        <type>gain</type>
        <debug type="bool">true</debug>
        <gain>1</gain>
        <enable>
            <condition>
                <and>
                    <equals>
                        <property>fadec/engine-switch[0]</property>
                        <value>2</value>
                    </equals>
                    <greater-than>
                        <property>engines/engine[0]/n1</property>
						<property>fadec/configuration/idle-n1</property>
                    </greater-than>
                </and>
            </condition>
        </enable>
        <input>
            <value>1</value>
        </input>
        <output>fadec/engine-switch[0]</output>
    </filter>

    <filter>
        <name>Cutoff Left</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <!-- engine switch "OFF": always cutoff fuel -->
            <condition>
                <equals>
                    <property>fadec/engine-switch[0]</property>
                    <value>0</value>
                </equals>
            </condition>
            <value>1</value>
        </input>
        <input>
            <condition>
                <or>
                    <!-- OVRD: always ignite -->
                    <equals>
                        <property>fadec/ignition-switch[0]</property>
                        <value>2</value>
                    </equals>
                    <!-- AUTO: ignite when N2 >= 20% -->
                    <and>
                        <equals>
                            <property>fadec/ignition-switch[0]</property>
                            <value>1</value>
                        </equals>
                        <greater-than>
                            <property>/engines/engine[0]/n2</property>
                            <value>20</value>
                        </greater-than>
                    </and>
                </or>
            </condition>
            <value>0</value>
        </input>
        <input>
            <value>1</value>
        </input>
        <output>controls/engines/engine[0]/cutoff-switch</output>
    </filter>

    <filter>
        <name>Target Left</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <property>controls/engines/engine[0]/starter-switch</property>
            </condition>
            <expression>
                <sum>
                    <property>fadec/configuration/idle-n1</property>
                    <value>0.1</value>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <greater-than>
                    <property>controls/engines/engine[0]/throttle</property>
                    <property>fadec/configuration/throttle-toga-norm</property>
                </greater-than>
            </condition>
            <expression>
                <sum>
                    <property>fadec/configuration/idle-n1</property>
                    <product>
                        <property>/controls/engines/engine[0]/throttle</property>
                        <difference>
                            <property>fadec/configuration/max-n1</property>
                            <property>fadec/configuration/idle-n1</property>
                        </difference>
                    </product>
                </sum>
            </expression>
        </input>
        <input>
            <expression>
                <min>
                    <sum>
                        <property>fadec/configuration/idle-n1</property>
                        <product>
                            <property>/controls/engines/engine[0]/throttle</property>
                            <difference>
                                <property>fadec/configuration/max-n1</property>
                                <property>fadec/configuration/idle-n1</property>
                            </difference>
                        </product>
                    </sum>
                    <property>fadec/trs-limit</property>
                </min>
            </expression>
        </input>
        <output>/fadec/target[0]</output>
    </filter>

    <filter>
        <name>Throttle Left</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <expression>
                <div>
                    <difference>
                        <property>/fadec/target[0]</property>
                        <property>fadec/configuration/idle-n1</property>
                    </difference>
                    <difference>
                        <property>fadec/configuration/max-n1</property>
                        <property>fadec/configuration/idle-n1</property>
                    </difference>
                </div>
            </expression>
        </input>
        <output>fadec/throttle-cmd[0]</output>
    </filter>

    <!-- RIGHT ENGINE -->
    <filter>
        <name>Starter Right</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <equals>
                    <property>fadec/engine-switch[1]</property>
                    <value>2</value>
                </equals>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>0</value>
        </input>
        <output>controls/engines/engine[1]/starter-switch</output>
    </filter>

    <filter>
        <name>Spring-load engine switch Right</name>
        <type>gain</type>
        <debug type="bool">true</debug>
        <gain>1</gain>
        <enable>
            <condition>
                <and>
                    <equals>
                        <property>fadec/engine-switch[1]</property>
                        <value>2</value>
                    </equals>
                    <greater-than>
                        <property>engines/engine[1]/n1</property>
						<property>fadec/configuration/idle-n1</property>
                    </greater-than>
                </and>
            </condition>
        </enable>
        <input>
            <value>1</value>
        </input>
        <output>fadec/engine-switch[1]</output>
    </filter>

    <filter>
        <name>Cutoff Right</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <!-- engine switch "OFF": always cutoff fuel -->
            <condition>
                <equals>
                    <property>fadec/engine-switch[1]</property>
                    <value>0</value>
                </equals>
            </condition>
            <value>1</value>
        </input>
        <input>
            <condition>
                <or>
                    <!-- OVRD: always ignite -->
                    <equals>
                        <property>fadec/ignition-switch[1]</property>
                        <value>2</value>
                    </equals>
                    <!-- AUTO: ignite when N2 >= 20% -->
                    <and>
                        <equals>
                            <property>fadec/ignition-switch[1]</property>
                            <value>1</value>
                        </equals>
                        <greater-than>
                            <property>/engines/engine[1]/n2</property>
                            <value>20</value>
                        </greater-than>
                    </and>
                </or>
            </condition>
            <value>0</value>
        </input>
        <input>
            <value>1</value>
        </input>
        <output>controls/engines/engine[1]/cutoff-switch</output>
    </filter>


    <filter>
        <name>Target Right</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <property>controls/engines/engine[1]/starter-switch</property>
            </condition>
            <expression>
                <sum>
                    <property>fadec/configuration/idle-n1</property>
                    <value>0.1</value>
                </sum>
            </expression>
        </input>
        <input>
            <condition>
                <greater-than>
                    <property>controls/engines/engine[1]/throttle</property>
                    <property>fadec/configuration/throttle-toga-norm</property>
                </greater-than>
            </condition>
            <expression>
                <sum>
                    <property>fadec/configuration/idle-n1</property>
                    <product>
                        <property>/controls/engines/engine[1]/throttle</property>
                        <difference>
                            <property>fadec/configuration/max-n1</property>
                            <property>fadec/configuration/idle-n1</property>
                        </difference>
                    </product>
                </sum>
            </expression>
        </input>
        <input>
            <expression>
                <min>
                    <sum>
                        <property>fadec/configuration/idle-n1</property>
                        <product>
                            <property>/controls/engines/engine[1]/throttle</property>
                            <difference>
                                <property>fadec/configuration/max-n1</property>
                                <property>fadec/configuration/idle-n1</property>
                            </difference>
                        </product>
                    </sum>
                    <property>fadec/trs-limit</property>
                </min>
            </expression>
        </input>
        <output>/fadec/target[1]</output>
    </filter>

    <filter>
        <name>Throttle Right</name>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <expression>
                <div>
                    <difference>
                        <property>/fadec/target[1]</property>
                        <property>fadec/configuration/idle-n1</property>
                    </difference>
                    <difference>
                        <property>fadec/configuration/max-n1</property>
                        <property>fadec/configuration/idle-n1</property>
                    </difference>
                </div>
            </expression>
        </input>
        <output>fadec/throttle-cmd[1]</output>
    </filter>

</PropertyList>
